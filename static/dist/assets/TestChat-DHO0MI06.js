import{e as P,r as i,G as $,o as F,f as H,w as l,J as K,j as e,l as d,s as T,h as f,i as I,k as L,n as A,t as j,F as R,y as h,K as S,g as c}from"./vendor-ct0Dgaa7.js";import{b as y,a as D}from"./index-vE_pF-Xr.js";import{_ as G}from"./BaseLayout.vue_vue_type_script_setup_true_lang-D6k48umn.js";import{_ as E}from"./BaseCard.vue_vue_type_script_setup_true_lang-TVPlXeRZ.js";import{_ as x}from"./BaseButton.vue_vue_type_script_setup_true_lang-SXsD0NUS.js";import{_ as J}from"./BaseInput.vue_vue_type_script_setup_true_lang-D9I1de4X.js";import"./utils-NIGUFBhG.js";const U={class:"mb-8"},q={class:"flex items-center justify-between"},O={class:"flex items-center space-x-4"},Q={key:0,class:"text-center py-12"},W={class:"whitespace-pre-wrap"},X={class:"text-xs mt-2 opacity-70"},Y={key:1,class:"flex justify-start"},Z={class:"border-t border-gray-200 p-6"},ee={class:"flex-1"},de=P({__name:"TestChat",setup(se){const{success:w,error:b}=D(),o=i([]),n=i(""),r=i(!1),u=i(!1),m=i(null),p=i(),_=(a,s)=>{const t={id:Math.random().toString(36).substr(2,9),role:a,content:s,timestamp:new Date};o.value.push(t),v()},v=()=>{K(()=>{p.value&&(p.value.scrollTop=p.value.scrollHeight)})},B=a=>a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),k=()=>{o.value=[],m.value=null,_("assistant","Hello! I'm powered by Gemini AI. How can I help you today?")},V=async()=>{try{w("Testing API connectivity...");const a=await y.get("/test");console.log("Test endpoint response:",a);const s=await y.post("/chat-sessions");console.log("Session creation response:",s),w("API test successful!","All endpoints are working correctly.")}catch(a){b("API test failed",a.message)}},M=async()=>{if(!n.value.trim()||r.value)return;const a=n.value.trim();n.value="",_("user",a),r.value=!0,u.value=!0;try{if(!m.value){const g=await y.post("/chat-sessions");m.value=g.session_id}let s="";const t=Math.random().toString(36).substr(2,9),z={id:t,role:"assistant",content:"",timestamp:new Date};o.value.push(z),v(),await y.stream("/chat",{message:a,session_id:m.value},g=>{s+=g;const C=o.value.findIndex(N=>N.id===t);C!==-1&&(o.value[C].content=s,v())})}catch(s){b("Failed to send message",s.message),o.value=o.value.filter(t=>t.content!=="")}finally{r.value=!1,u.value=!1}};return $(u,a=>{a&&v()}),F(()=>{k()}),(a,s)=>(c(),H(G,null,{default:l(()=>[e("div",U,[e("div",q,[s[4]||(s[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Test Fine-Tuned Model"),e("p",{class:"mt-2 text-gray-600"},"Test your AI chatbot with real-time responses powered by Gemini AI.")],-1)),e("div",O,[d(x,{variant:"secondary",size:"sm",onClick:k},{default:l(()=>[...s[2]||(s[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" New Chat ",-1)])]),_:1}),d(x,{variant:"secondary",size:"sm",onClick:V},{default:l(()=>[...s[3]||(s[3]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),T(" Test API ",-1)])]),_:1})])])]),d(E,{class:"h-[70vh] flex flex-col"},{default:l(()=>[e("div",{class:"flex-1 overflow-y-auto p-6 space-y-4",ref_key:"messagesContainer",ref:p},[o.value.length===0?(c(),f("div",Q,[...s[5]||(s[5]=[e("div",{class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Start a conversation",-1),e("p",{class:"text-gray-500"},"Ask me anything to test the AI chatbot!",-1)])])):I("",!0),(c(!0),f(R,null,L(o.value,t=>(c(),f("div",{key:t.id,class:A(["flex",t.role==="user"?"justify-end":"justify-start"])},[e("div",{class:A(["max-w-xs lg:max-w-md px-4 py-3 rounded-2xl",t.role==="user"?"bg-primary-600 text-white":"bg-gray-100 text-gray-900"])},[e("div",W,j(t.content),1),e("div",X,j(B(t.timestamp)),1)],2)],2))),128)),u.value?(c(),f("div",Y,[...s[6]||(s[6]=[e("div",{class:"bg-gray-100 text-gray-900 px-4 py-3 rounded-2xl"},[e("div",{class:"flex items-center space-x-1"},[e("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),e("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})])],-1)])])):I("",!0)],512),e("div",Z,[e("form",{onSubmit:h(M,["prevent"]),class:"flex items-end space-x-4"},[e("div",ee,[d(J,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),placeholder:"Type your message...",disabled:r.value,onKeydown:[S(h(M,["exact"]),["enter"]),s[1]||(s[1]=S(h(t=>n.value+=`
`,["shift"]),["enter"]))]},null,8,["modelValue","disabled","onKeydown"])]),d(x,{type:"submit",variant:"primary",loading:r.value,disabled:!n.value.trim()},{default:l(()=>[...s[7]||(s[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])]),_:1},8,["loading","disabled"])],32)])]),_:1})]),_:1}))}});export{de as default};
