import{e as z,r as i,o as L,f as x,w as g,j as e,h as n,i as j,t as r,u as A,z as B,D as T,k as _,F as w,l as h,n as k,s as V,g as o}from"./vendor-ct0Dgaa7.js";import{u as N,b}from"./index-vE_pF-Xr.js";import{_ as E}from"./BaseLayout.vue_vue_type_script_setup_true_lang-D6k48umn.js";import{_ as M}from"./BaseCard.vue_vue_type_script_setup_true_lang-TVPlXeRZ.js";import{_ as F}from"./BaseButton.vue_vue_type_script_setup_true_lang-SXsD0NUS.js";import{_ as H}from"./StatCard.vue_vue_type_script_setup_true_lang-CLjUR74-.js";import"./utils-NIGUFBhG.js";const O={class:"mb-8"},U={class:"flex items-center justify-between"},K={class:"mt-2 text-gray-600"},R={class:"flex items-center space-x-4"},q={key:0,class:"mb-6 p-4 bg-error-50 border border-error-200 rounded-lg"},P={class:"flex"},G={class:"text-error-700"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 mb-8"},J={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Q={key:0,class:"text-center py-8"},X={key:1,class:"space-y-4"},Y={class:"flex-1 min-w-0"},Z={class:"text-sm font-medium text-gray-900 truncate"},ee={class:"text-sm text-gray-500"},te={class:"flex-shrink-0"},se={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800"},ae={class:"space-y-4"},oe={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},ne={class:"flex items-center space-x-3"},re={class:"mt-6 pt-6 border-t border-gray-200"},C="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",le="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",ie="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",de="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",ye=z({__name:"Dashboard",setup(ue){const S=N(),d=i("30"),u=i(null),l=i(!1),c=i([{key:"total_users",title:"Total Users",value:0,period:"All time",loading:!0,icon:C,trend:null},{key:"active_users",title:"Active Users",value:0,period:"In the last 30 days",loading:!0,icon:C,trend:null},{key:"sessions",title:"Chat Sessions",value:0,period:"In the last 30 days",loading:!0,icon:le,trend:null},{key:"messages",title:"Messages Exchanged",value:0,period:"In the last 30 days",loading:!0,icon:ie,trend:null},{key:"knowledge_files",title:"Knowledge Files",value:0,period:"Total indexed files",loading:!0,icon:de,trend:null}]),f=i([{id:1,title:"Customer Support Inquiry",updated_at:new Date(Date.now()-1e3*60*30).toISOString(),message_count:5},{id:2,title:"Product Information Request",updated_at:new Date(Date.now()-1e3*60*60*2).toISOString(),message_count:8},{id:3,title:"Technical Support",updated_at:new Date(Date.now()-1e3*60*60*4).toISOString(),message_count:12}]),y=async()=>{u.value=null,c.value.forEach(a=>{a.loading=!0});try{const a=await b.get(`/dashboard-stats?days=${d.value}`);c.value.forEach(t=>{t.loading=!1,t.value=a[t.key]||0,t.key!=="total_users"&&t.key!=="knowledge_files"&&(t.period=`In the last ${d.value} days`)})}catch(a){u.value=a.message||"Failed to load dashboard statistics",c.value.forEach(t=>{t.loading=!1})}},D=a=>{const t=new Date(a),s=Math.round((new Date().getTime()-t.getTime())/1e3),m=Math.round(s/60),v=Math.round(m/60),$=Math.round(v/24);return s<60?`${s} sec ago`:m<60?`${m} min ago`:v<24?`${v} hr ago`:`${$} days ago`},I=async()=>{try{const a=await b.get("/kommo/integration/status");l.value=a.active||!1}catch{l.value=!1}};return L(()=>{y(),I()}),(a,t)=>(o(),x(E,null,{default:g(()=>{var p;return[e("div",O,[e("div",U,[e("div",null,[t[3]||(t[3]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Dashboard",-1)),e("p",K,"Welcome back, "+r((p=A(S).user)==null?void 0:p.username)+"! Here's what's happening with your AI chatbot.",1)]),e("div",R,[B(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),onChange:y,class:"form-select w-48"},[...t[4]||(t[4]=[e("option",{value:"7"},"Last 7 Days",-1),e("option",{value:"30"},"Last 30 Days",-1),e("option",{value:"90"},"Last 90 Days",-1),e("option",{value:"365"},"Last 365 Days",-1)])],544),[[T,d.value]])])])]),u.value?(o(),n("div",q,[e("div",P,[t[5]||(t[5]=e("svg",{class:"w-5 h-5 text-error-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",G,r(u.value),1)])])):j("",!0),e("div",W,[(o(!0),n(w,null,_(c.value,s=>(o(),x(H,{key:s.key,title:s.title,value:s.value,period:s.period,loading:s.loading,icon:s.icon,trend:s.trend},null,8,["title","value","period","loading","icon","trend"]))),128))]),e("div",J,[h(M,{title:"Recent Chat Sessions",subtitle:"Latest conversations with your AI assistant"},{default:g(()=>[f.value.length===0?(o(),n("div",Q,[...t[6]||(t[6]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No recent chats",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Start a conversation to see it here.",-1)])])):(o(),n("div",X,[(o(!0),n(w,null,_(f.value,s=>(o(),n("div",{key:s.id,class:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:t[1]||(t[1]=m=>a.$router.push("/chat-history"))},[t[7]||(t[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])])],-1)),e("div",Y,[e("p",Z,r(s.title),1),e("p",ee,r(D(s.updated_at)),1)]),e("div",te,[e("span",se,r(s.message_count)+" messages ",1)])]))),128))]))]),_:1}),h(M,{title:"System Status",subtitle:"Current status of your AI chatbot"},{default:g(()=>[e("div",ae,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-3 h-3 bg-success-400 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-900"},"AI Service")]),e("span",{class:"text-sm text-success-600 font-medium"},"Online")],-1)),t[10]||(t[10]=e("div",{class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-3 h-3 bg-success-400 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-900"},"Database")]),e("span",{class:"text-sm text-success-600 font-medium"},"Connected")],-1)),e("div",oe,[e("div",ne,[e("div",{class:k(["w-3 h-3 rounded-full",l.value?"bg-success-400":"bg-warning-400"])},null,2),t[8]||(t[8]=e("span",{class:"text-sm font-medium text-gray-900"},"Kommo Integration",-1))]),e("span",{class:k(["text-sm font-medium",l.value?"text-success-600":"text-warning-600"])},r(l.value?"Active":"Not Configured"),3)])]),e("div",re,[h(F,{variant:"primary",size:"sm","full-width":"",onClick:t[2]||(t[2]=s=>a.$router.push("/test-chat"))},{default:g(()=>[...t[11]||(t[11]=[V(" Test Chat Interface ",-1)])]),_:1})])]),_:1})])]}),_:1}))}});export{ye as default};
