import{e as L,r as t,o as Y,f as J,w as m,j as e,l as i,h as w,k as O,n as _,s as x,t as I,F as Q,i as S,y as F,z as j,B as z,g as y}from"./vendor-ct0Dgaa7.js";import{u as W,b as A,a as Z}from"./index-vE_pF-Xr.js";import{_ as ee}from"./BaseLayout.vue_vue_type_script_setup_true_lang-D6k48umn.js";import{_ as G}from"./BaseCard.vue_vue_type_script_setup_true_lang-TVPlXeRZ.js";import{_ as V}from"./BaseButton.vue_vue_type_script_setup_true_lang-SXsD0NUS.js";import{_ as p}from"./BaseInput.vue_vue_type_script_setup_true_lang-D9I1de4X.js";import"./utils-NIGUFBhG.js";const se={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ae={class:"space-y-1 p-4"},te=["onClick"],re={class:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le=["d"],ie={key:0,class:"space-y-6"},oe={class:"flex justify-end"},ne={key:1,class:"space-y-6"},de={class:"flex justify-end"},ue={key:2,class:"space-y-6"},ce={class:"space-y-6 p-6"},fe={class:"border border-gray-200 rounded-lg p-4"},me={class:"flex items-center justify-between mb-4"},pe={class:"flex items-center space-x-2"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ye={class:"mt-4 flex justify-end"},ge={class:"border border-gray-200 rounded-lg p-4"},we={class:"flex items-center justify-between mb-4"},xe={class:"flex items-center space-x-2"},Pe={class:"mt-4 flex justify-end"},be={class:"border border-gray-200 rounded-lg p-4"},he={class:"grid grid-cols-2 gap-4"},ke={class:"text-center"},_e={class:"text-2xl font-bold text-primary-600"},Ie={class:"text-center"},Ae={class:"text-2xl font-bold text-success-600"},Ve={key:3,class:"space-y-6"},Se={class:"space-y-6 p-6"},Ce={class:"space-y-4"},Ue={class:"flex items-center justify-between"},Ke={class:"relative inline-flex items-center cursor-pointer"},Ee={class:"flex items-center justify-between"},Me={class:"relative inline-flex items-center cursor-pointer"},qe={class:"flex items-center justify-between"},Ne={class:"relative inline-flex items-center cursor-pointer"},je={class:"pt-4 border-t border-gray-200"},ze="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",Fe="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",Ge="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",Xe="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z",Oe=L({__name:"Settings",setup(Be){const o=W(),{success:P,error:b}=Z(),g=t("profile"),X=[{id:"profile",name:"Profile",icon:ze},{id:"security",name:"Security",icon:Fe},{id:"api",name:"API Settings",icon:Xe},{id:"preferences",name:"Preferences",icon:Ge}],d=t({username:"",email:""}),f=t({username:"",email:""}),C=t(!1),r=t({currentPassword:"",newPassword:"",confirmPassword:""}),n=t({currentPassword:"",newPassword:"",confirmPassword:""}),U=t(!1),u=t({affiliateId:"",apiKey:""}),v=t({affiliateId:"",apiKey:""}),h=t(!1),K=t(!1),E=t({geminiApiKey:""}),k=t(!1),M=t(!1),q=t({requests:0,tokens:0}),c=t({emailNotifications:!0,darkMode:!1,autoSave:!0}),N=t(!1),B=async()=>{if(f.value={username:"",email:""},d.value.username.trim()||(f.value.username="Username is required"),d.value.email.trim()?/\S+@\S+\.\S+/.test(d.value.email)||(f.value.email="Email is invalid"):f.value.email="Email is required",!(f.value.username||f.value.email)){C.value=!0;try{await o.updateProfile({username:d.value.username,email:d.value.email}),P("Profile updated successfully!")}catch(l){b("Failed to update profile",l.message)}finally{C.value=!1}}},D=async()=>{if(n.value={currentPassword:"",newPassword:"",confirmPassword:""},r.value.currentPassword||(n.value.currentPassword="Current password is required"),r.value.newPassword?r.value.newPassword.length<6&&(n.value.newPassword="Password must be at least 6 characters"):n.value.newPassword="New password is required",r.value.confirmPassword?r.value.newPassword!==r.value.confirmPassword&&(n.value.confirmPassword="Passwords do not match"):n.value.confirmPassword="Please confirm your password",!(n.value.currentPassword||n.value.newPassword||n.value.confirmPassword)){U.value=!0;try{await o.changePassword({current_password:r.value.currentPassword,new_password:r.value.newPassword}),P("Password changed successfully!"),r.value={currentPassword:"",newPassword:"",confirmPassword:""}}catch(l){b("Failed to change password",l.message)}finally{U.value=!1}}},T=async()=>{if(v.value={affiliateId:"",apiKey:""},u.value.affiliateId.trim()||(v.value.affiliateId="Affiliate ID is required"),u.value.apiKey.trim()||(v.value.apiKey="API Key is required"),!(v.value.affiliateId||v.value.apiKey)){K.value=!0;try{await A.post("/settings",{xelence_affiliateid:u.value.affiliateId,xelence_x_api_key:u.value.apiKey}),P("Xelence credentials updated successfully!"),h.value=!0}catch(l){b("Failed to update Xelence credentials",l.message)}finally{K.value=!1}}},$=async()=>{M.value=!0;try{await A.post("/settings/gemini-api",{api_key:E.value.geminiApiKey}),P("Gemini API key updated successfully!"),k.value=!0}catch(l){b("Failed to update API key",l.message)}finally{M.value=!1}},R=async()=>{N.value=!0;try{await A.put("/settings/preferences",c.value),P("Preferences updated successfully!")}catch(l){b("Failed to update preferences",l.message)}finally{N.value=!1}},H=async()=>{try{o.user&&(d.value={username:o.user.username,email:o.user.email},o.user.profile&&(u.value={affiliateId:o.user.profile.xelence_affiliateid||"",apiKey:o.user.profile.xelence_x_api_key?"••••••••":""},h.value=!!(o.user.profile.xelence_affiliateid&&o.user.profile.xelence_x_api_key)));const l=await A.get("/settings/api");k.value=l.gemini_configured||!1,q.value=l.usage||{requests:0,tokens:0};const s=await A.get("/settings/preferences");c.value={...c.value,...s}}catch(l){console.error("Failed to load settings:",l)}};return Y(async()=>{o.user===null&&!o.isLoading&&await o.initializeAuth(),H()}),(l,s)=>(y(),J(ee,null,{default:m(()=>[s[32]||(s[32]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Settings"),e("p",{class:"mt-2 text-gray-600"},"Manage your account settings and preferences.")])])],-1)),e("div",se,[i(G,{class:"lg:col-span-1"},{default:m(()=>[s[11]||(s[11]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Settings")],-1)),e("nav",ae,[(y(),w(Q,null,O(X,a=>e("button",{key:a.id,onClick:De=>g.value=a.id,class:_(["nav-item w-full text-left",g.value===a.id?"nav-item-active":"nav-item-inactive"])},[(y(),w("svg",re,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:a.icon},null,8,le)])),x(" "+I(a.name),1)],10,te)),64))])]),_:1}),i(G,{class:"lg:col-span-2"},{default:m(()=>[g.value==="profile"?(y(),w("div",ie,[s[13]||(s[13]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Profile Information"),e("p",{class:"text-sm text-gray-600 mt-1"},"Update your personal information")],-1)),e("form",{onSubmit:F(B,["prevent"]),class:"space-y-6 p-6"},[i(p,{modelValue:d.value.username,"onUpdate:modelValue":s[0]||(s[0]=a=>d.value.username=a),label:"Username",placeholder:"Enter your username",error:f.value.username,required:""},null,8,["modelValue","error"]),i(p,{modelValue:d.value.email,"onUpdate:modelValue":s[1]||(s[1]=a=>d.value.email=a),type:"email",label:"Email Address",placeholder:"Enter your email",error:f.value.email,required:""},null,8,["modelValue","error"]),e("div",oe,[i(V,{type:"submit",variant:"primary",loading:C.value},{default:m(()=>[...s[12]||(s[12]=[x(" Update Profile ",-1)])]),_:1},8,["loading"])])],32)])):S("",!0),g.value==="security"?(y(),w("div",ne,[s[15]||(s[15]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Security Settings"),e("p",{class:"text-sm text-gray-600 mt-1"},"Manage your password and security preferences")],-1)),e("form",{onSubmit:F(D,["prevent"]),class:"space-y-6 p-6"},[i(p,{modelValue:r.value.currentPassword,"onUpdate:modelValue":s[2]||(s[2]=a=>r.value.currentPassword=a),type:"password",label:"Current Password",placeholder:"Enter your current password",error:n.value.currentPassword,required:""},null,8,["modelValue","error"]),i(p,{modelValue:r.value.newPassword,"onUpdate:modelValue":s[3]||(s[3]=a=>r.value.newPassword=a),type:"password",label:"New Password",placeholder:"Enter your new password",error:n.value.newPassword,required:""},null,8,["modelValue","error"]),i(p,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":s[4]||(s[4]=a=>r.value.confirmPassword=a),type:"password",label:"Confirm New Password",placeholder:"Confirm your new password",error:n.value.confirmPassword,required:""},null,8,["modelValue","error"]),e("div",de,[i(V,{type:"submit",variant:"primary",loading:U.value},{default:m(()=>[...s[14]||(s[14]=[x(" Change Password ",-1)])]),_:1},8,["loading"])])],32)])):S("",!0),g.value==="api"?(y(),w("div",ue,[s[23]||(s[23]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"API Configuration"),e("p",{class:"text-sm text-gray-600 mt-1"},"Manage your API keys and integrations")],-1)),e("div",ce,[e("div",fe,[e("div",me,[s[16]||(s[16]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-900"},"Xelence Integration"),e("p",{class:"text-sm text-gray-500"},"Configure your Xelence affiliate credentials for media reports")],-1)),e("div",pe,[e("div",{class:_(["w-3 h-3 rounded-full",h.value?"bg-success-400":"bg-warning-400"])},null,2),e("span",{class:_(["text-sm font-medium",h.value?"text-success-600":"text-warning-600"])},I(h.value?"Configured":"Not Configured"),3)])]),e("div",ve,[i(p,{modelValue:u.value.affiliateId,"onUpdate:modelValue":s[5]||(s[5]=a=>u.value.affiliateId=a),label:"Affiliate ID",placeholder:"Enter your Xelence affiliate ID",error:v.value.affiliateId},null,8,["modelValue","error"]),i(p,{modelValue:u.value.apiKey,"onUpdate:modelValue":s[6]||(s[6]=a=>u.value.apiKey=a),type:"password",label:"API Key",placeholder:"Enter your Xelence API key",error:v.value.apiKey},null,8,["modelValue","error"])]),e("div",ye,[i(V,{variant:"primary",size:"sm",loading:K.value,onClick:T},{default:m(()=>[...s[17]||(s[17]=[x(" Save Credentials ",-1)])]),_:1},8,["loading"])])]),e("div",ge,[e("div",we,[s[18]||(s[18]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-900"},"Google Gemini API"),e("p",{class:"text-sm text-gray-500"},"Configure your Gemini API key for AI responses")],-1)),e("div",xe,[e("div",{class:_(["w-3 h-3 rounded-full",k.value?"bg-success-400":"bg-warning-400"])},null,2),e("span",{class:_(["text-sm font-medium",k.value?"text-success-600":"text-warning-600"])},I(k.value?"Configured":"Not Configured"),3)])]),i(p,{modelValue:E.value.geminiApiKey,"onUpdate:modelValue":s[7]||(s[7]=a=>E.value.geminiApiKey=a),type:"password",label:"Gemini API Key",placeholder:"Enter your Gemini API key",hint:"You can get your API key from Google AI Studio"},null,8,["modelValue"]),e("div",Pe,[i(V,{variant:"primary",size:"sm",loading:M.value,onClick:$},{default:m(()=>[...s[19]||(s[19]=[x(" Save API Key ",-1)])]),_:1},8,["loading"])])]),e("div",be,[s[22]||(s[22]=e("h4",{class:"text-sm font-medium text-gray-900 mb-4"},"API Usage Statistics",-1)),e("div",he,[e("div",ke,[e("div",_e,I(q.value.requests),1),s[20]||(s[20]=e("div",{class:"text-sm text-gray-500"},"Total Requests",-1))]),e("div",Ie,[e("div",Ae,I(q.value.tokens),1),s[21]||(s[21]=e("div",{class:"text-sm text-gray-500"},"Tokens Used",-1))])])])])])):S("",!0),g.value==="preferences"?(y(),w("div",Ve,[s[31]||(s[31]=e("div",{class:"card-header"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Preferences"),e("p",{class:"text-sm text-gray-600 mt-1"},"Customize your experience")],-1)),e("div",Se,[e("div",Ce,[e("div",Ue,[s[25]||(s[25]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-900"},"Email Notifications"),e("p",{class:"text-sm text-gray-500"},"Receive email updates about your chatbot")],-1)),e("label",Ke,[j(e("input",{"onUpdate:modelValue":s[8]||(s[8]=a=>c.value.emailNotifications=a),type:"checkbox",class:"sr-only peer"},null,512),[[z,c.value.emailNotifications]]),s[24]||(s[24]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),e("div",Ee,[s[27]||(s[27]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-900"},"Dark Mode"),e("p",{class:"text-sm text-gray-500"},"Switch to dark theme")],-1)),e("label",Me,[j(e("input",{"onUpdate:modelValue":s[9]||(s[9]=a=>c.value.darkMode=a),type:"checkbox",class:"sr-only peer"},null,512),[[z,c.value.darkMode]]),s[26]||(s[26]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),e("div",qe,[s[29]||(s[29]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-900"},"Auto-save"),e("p",{class:"text-sm text-gray-500"},"Automatically save your work")],-1)),e("label",Ne,[j(e("input",{"onUpdate:modelValue":s[10]||(s[10]=a=>c.value.autoSave=a),type:"checkbox",class:"sr-only peer"},null,512),[[z,c.value.autoSave]]),s[28]||(s[28]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])])]),e("div",je,[i(V,{variant:"primary",loading:N.value,onClick:R},{default:m(()=>[...s[30]||(s[30]=[x(" Save Preferences ",-1)])]),_:1},8,["loading"])])])])):S("",!0)]),_:1})])]),_:1}))}});export{Oe as default};
